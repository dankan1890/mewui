language: cpp

# OS config, depends on actual 'os' in build matrix
dist: xenial
sudo: false

env:
  global:
    - OPTIONS="IGNORE_GIT=1 OPTIMIZE=0"

matrix:
  include:
    - name: Linux (SUBTARGET=tiny, GCC 9)
      env: SUBTARGET=tiny MATRIX_EVAL="CC=gcc-9 && CXX=g++-9"
      os: linux
      compiler: gcc-9
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - &gcc9_deps [gcc-9, g++-9]
            - &linux_deps [libsdl2-dev, libsdl2-ttf-dev, libasound2-dev, libxinerama-dev, libxi-dev, qt55base, qt55quickcontrols, qt55declarative, qt55tools, qt55svg]

before_install:
  - eval "${MATRIX_EVAL}"

script:
  make -j4 CC=$CC CXX=$CXX $OPTIONS

notifications:
  email: false